{% extends "layout/layout.html" %}
{% load static %} {# THÊM DÒNG NÀY #}

{% block css %}
<link rel="stylesheet" href="{% static 'css/display_location.css' %}">
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<style>
    #map {
        height: 500px;
        width: 100%;
    }
</style>
<link rel="stylesheet" href="{% static 'css/display_location.css' %}?v={{ timestamp }}">
{% endblock %}

{% block title %} {{location_name}} {% endblock %}

{% block body %}
<div class="location-container">
    <div class="favourite-location">
        <div class="location-name">
            {{ location_name }}
        </div>

        <div class="checkbox">
            <form method="post" action="{% url 'locations' %}" class="fav-form" style="display:inline;">
                {% csrf_token %}
                <input type="hidden" name="value" value="{{ code }}">
                <button type="submit" style="background: none; border: none; padding: 0; cursor: pointer;">
                    {{ favourite_symbol|safe }}
                </button>
            </form>
        </div>
    </div>

    <div class="location-rating">
        Rating: {{ star_html|safe }}
    </div>

    <div class="location-img">
        <img src="{% static image_path %}" alt="{{ location.name }}">
    </div>

    <div class="location-info">
        <div class="head-of-info">

        </div>

        <div class="location-ticket-info">
            Price: {{ ticket_info }}
        </div>

        <div class="location-address">
            Address: {{ address }}
        </div>
    </div>

    <div class="location-description">
        Description: {{ long_description }}
    </div>

    <div id="map"></div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js">
    </script>

    <script>
        // Set your coordinates here
        const latitude = {{ lat }};
        const longitude = {{ long }};

        const map = L.map('map').setView([latitude, longitude], 40);

        // Load and display tile layer from OSM
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '© OpenStreetMap contributors'
        }).addTo(map);

        // Add a marker
        L.marker([latitude, longitude]).addTo(map)
            .bindPopup('{{ location_name }}')
            .openPopup();
    </script>
</div>

{% endblock %}